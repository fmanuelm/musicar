<div class="main-content">
    <div class="container-fluid">
        <form [formGroup]="form">
            <div class="row">
                <app-breadcrumb view="create"></app-breadcrumb>
                <div class="col-md-12 mt-3">
                    
                </div>
                <div class="col-md-12 mt-3">
                    <div class="row">
                        <div class="col-md-6">
                            <h1>Crear Usuario disponibilidad</h1>
                        </div>
                        <div class="col-md-6">
                            <div class="text-right">
                                <button mat-raised-button type="button" (click)="clearForm()"
                                    class="btn btn-fill btn-rose">
                                    <span class="material-symbols-outlined">
                                        delete
                                    </span>
                                    Limpiar formulario
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<app-breadcrumb view="create"></app-breadcrumb>-->
                <div class="col-md-12">
                    <div class="card ">
                        <div class="card-header card-header-rose card-header-text">
                            <div class="card-text">
                                <h4 class="card-title">Datos de usuario</h4>
                            </div>
                        </div>
                        <div class="card-body ">
                            
                            <div class="row ml-4 pl-4 mt-3">
                                <div class="col-sm-5">
                                    <button mat-raised-button type="button" class="btn btn-fill btn-success"
                                        data-toggle="modal" data-target="#modalUsuarios">Agregar
                                        usuario</button>
                                    <button mat-raised-button type="button" class="btn btn-fill btn-danger"
                                    (click)="deleteUsuarios()">Retirar
                                        usuario</button>
                                </div>
                            </div>
                            <div class="row ml-4 pl-4 mt-2">
                                <div class="col-sm-12">
                                    <p-table [globalFilterFields]="['nombres', 'apellidos', 'tipo_usuario', 'disponibilidad']" id="tableUsuarios" #tableUsuarios
                                        [value]="usuariosSelects" [paginator]="true" [rows]="10">
                                        <ng-template pTemplate="caption">
                                            <div class="flex">
                                                <div class="row">
                                                    <div class="col d-flex flex-row-reverse">
                                                        <span class="p-input-icon-left ml-auto">
                                                            <input pInputText type="text" class="form-control"
                                                                (input)="tableUsuarios.filterGlobal($event.target.value, 'contains')"
                                                                placeholder="Búsqueda Global" />
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <ng-template pTemplate="header" let-col>
                                            <tr [pSelectableRow]="usuariosSelects2">
                                                <th style="width: 4rem">
                                                    <p-tableHeaderCheckbox (click)="selectAll(usuariosSelects)">
                                                    </p-tableHeaderCheckbox>
                                                </th>
                                                <th class="justify-content-center" pSortableColumn="nombres">
                                                    Nombres
                                                    <p-sortIcon field="nombres"></p-sortIcon>
                                                    <p-columnFilter type="text" field="nombres" display="menu">
                                                    </p-columnFilter>
                                                </th>
                                                <th class="justify-content-center" pSortableColumn="apellidos">
                                                    Apellidos
                                                    <p-sortIcon field="apellidos"></p-sortIcon>
                                                    <p-columnFilter type="text" field="apellidos" display="menu">
                                                    </p-columnFilter>
                                                </th>
                                                <th class="justify-content-center" pSortableColumn="tipo_usuario">
                                                    Tipo usuario
                                                    <p-sortIcon field="tipo_usuario"></p-sortIcon>
                                                    <p-columnFilter type="text" field="tipo_usuario" display="menu">
                                                    </p-columnFilter>
                                                </th>
                                                <th class="justify-content-center" pSortableColumn="disponibilidad">
                                                    Disponibilidad
                                                    <p-sortIcon field="disponibilidad"></p-sortIcon>
                                                    <p-columnFilter type="text" field="disponibilidad" display="menu">
                                                    </p-columnFilter>
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-col>
                                            <tr [pSelectableRow]="col">
                                                <td>
                                                    <p-tableCheckbox (click)="selectUser(col)" [value]="col">
                                                    </p-tableCheckbox>
                                                </td>
                                                <td class="justify-content-center">
                                                    {{ col.nombres}}
                                                </td>
                                                <td class="justify-content-center">
                                                    {{ col.apellidos}}
                                                </td>
                                                <td class="justify-content-center">
                                                    {{ col.tipo_usuario}}
                                                </td>
                                                <td class="justify-content-center">
                                                    {{ col.disponibilidad}}
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="paginatorcenter">
                                            <button type="button" pButton icon="pi-cloud-upload"></button>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </div>
                           
                            
                            
                        </div>
                    </div>
                </div>
                
                <div class="col-md-12">
                    <div class="card ">
                        <div class="card-header card-header-rose card-header-text">
                            <div class="card-text">
                                <h4 class="card-title">Horarios de atención</h4>
                            </div>
                        </div>
                        <div class="card-body mt-2">
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Lunes</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="lunes_hora_inicial" matInput placeholder="Hora inicial"
                                            type="time">
                                        <mat-error *ngIf="form.get('lunes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="lunes_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('lunes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Martes</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="martes_hora_inicial" matInput placeholder="Hora inicial"
                                            type="time">
                                        <mat-error *ngIf="form.get('martes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="martes_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('martes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Miercoles</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="miercoles_hora_inicial" matInput
                                            placeholder="Hora inicial" type="time">
                                        <mat-error *ngIf="form.get('miercoles_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="miercoles_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('miercoles_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Jueves</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="jueves_hora_inicial" matInput placeholder="Hora inicial"
                                            type="time">
                                        <mat-error *ngIf="form.get('jueves_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="jueves_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('jueves_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Viernes</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="viernes_hora_inicial" matInput
                                            placeholder="Hora inicial" type="time">
                                        <mat-error *ngIf="form.get('viernes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="viernes_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('viernes_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Sabado</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="sabado_hora_inicial" matInput placeholder="Hora inicial"
                                            type="time">
                                        <mat-error *ngIf="form.get('sabado_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="sabado_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('sabado_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Domingo</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="domingo_hora_inicial" matInput
                                            placeholder="Hora inicial" type="time">
                                        <mat-error *ngIf="form.get('domingo_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="domingo_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('domingo_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row d-flex px-4 mx-4 mt-2">
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <b>Festivos</b>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="festivos_hora_inicial" matInput
                                            placeholder="Hora inicial" type="time">
                                        <mat-error *ngIf="form.get('festivos_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-4">
                                    <mat-form-field class="example-full-width">
                                        <input formControlName="festivos_hora_final" matInput placeholder="Hora final"
                                            type="time">
                                        <mat-error *ngIf="form.get('festivos_hora_final').hasError('incorrect')">
                                            Procure que las horas concuerden entre si.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 mt-3">
                    <div class="text-center">
                        <button mat-raised-button type="button" (click)="sendForm() " [disabled]="form.invalid || usuariosSelects.length === 0" class="btn btn-fill btn-rose">
                            <span class="material-symbols-outlined mr-1">
                                send
                            </span>
                            Crear
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- modals del componente -->
<div id="modalUsuarios" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header mb-3">
                <h4 class="modal-title text-left" id="exampleModalLabel"><b>Agregar Usuarios</b></h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12">
                    <p-table [globalFilterFields]="['nombres', 'apellidos', 'tipo_usuario', 'disponibilidad']" id="tableAgregarUsuario" #tableAgregarUsuario
                        [value]="usuarios" [paginator]="true" [rows]="10">
                        <ng-template pTemplate="caption">
                            <div class="flex">
                                <div class="row">
                                    <div class="col flex-row-reverse">
                                        <span class="p-input-icon-left ml-auto">
                                            <input pInputText type="text" class="form-control"
                                                (input)="tableAgregarUsuario.filterGlobal($event.target.value, 'contains')"
                                                placeholder="Búsqueda Global" />
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header" let-col>
                            <tr [pSelectableRow]="clientes">
                                <th style="width: 4rem">
                                    <p-tableHeaderCheckbox (click)="selectAllSend(clientes)">
                                    </p-tableHeaderCheckbox>
                                </th>
                                <th pSortableColumn="nombres">
                                    Nombres
                                    <p-sortIcon field="nombres"></p-sortIcon>
                                </th>
                                <th pSortableColumn="apellidos">
                                    Apellidos
                                    <p-sortIcon field="apellidos"></p-sortIcon>
                                </th>
                                <th pSortableColumn="tipo_usuario">
                                    Tipo Usuario
                                    <p-sortIcon field="tipo_usuario"></p-sortIcon>
                                </th>
                                <th pSortableColumn="disponibilidad">
                                    Disponibilidad
                                    <p-sortIcon field="disponibilidad"></p-sortIcon>
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-col>
                            <tr [pSelectableRow]="col">
                                <td>
                                    <p-tableCheckbox (click)="selectUsuariosSend(col)" [value]="col"></p-tableCheckbox>
                                </td>
                                <td>
                                    {{ col.nombres }}
                                </td>
                                <td>
                                    {{ col.apellidos }}
                                </td>
                                <td>
                                    {{ col.tipo_usuario }}
                                </td>
                                <td>
                                    {{ col.disponibilidad }}
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="paginatorcenter">
                            <button type="button" pButton icon="pi-cloud-upload"></button>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger mr-3" data-dismiss="modal"
                    (click)="cancelModal()">Cancelar</button>
                <button type="button" class="btn btn-success" data-dismiss="modal"
                    (click)="aceptModal()">Aceptar</button>
            </div>
        </div>
    </div>
</div>